# Create a record that we'll try to read later:
$ /bin/go-console
$ echo "test" | zk create /sim-lost-majority

# Simulate losing a minority of zookeepers by killing
# `zookeeper.{1,2}`:
$ docker stop zookeeper.1
$ docker stop zookeeper.2

# Try running a basic `zk` operation, it should fail:
$ /bin/go-console
$ zk children /
2014/05/31 18:15:11 Failed to connect to 192.168.1.2:2181: dial tcp 192.168.1.2:2181: i/o timeout
2014/05/31 18:15:12 Failed to connect to 192.168.1.1:2181: dial tcp 192.168.1.1:2181: i/o timeout
2014/05/31 18:15:13 Failed to connect to 192.168.1.2:2181: dial tcp 192.168.1.2:2181: no route to host
2014/05/31 18:15:14 Failed to connect to 192.168.1.1:2181: dial tcp 192.168.1.1:2181: i/o timeout
2014/05/31 18:15:15 Failed to connect to 192.168.1.2:2181: dial tcp 192.168.1.2:2181: i/o timeout

# Writes should fail as well:
$ echo "test2" | zk set /sim-lost-majority
2014/05/31 18:16:12 Failed to connect to 192.168.1.2:2181: dial tcp 192.168.1.2:2181: i/o timeout
2014/05/31 18:16:13 Failed to connect to 192.168.1.1:2181: dial tcp 192.168.1.1:2181: i/o timeout
2014/05/31 18:16:14 Failed to connect to 192.168.1.2:2181: dial tcp 192.168.1.2:2181: no route to host
2014/05/31 18:16:15 Failed to connect to 192.168.1.1:2181: dial tcp 192.168.1.1:2181: no route to host
2014/05/31 18:16:16 Failed to connect to 192.168.1.2:2181: dial tcp 192.168.1.2:2181: i/o timeout

# (Currently neither of these commands exit though.)
